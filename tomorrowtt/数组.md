# 05 | 数组：为什么很多编程语言中数组都从0开始编号？


## 如何实现随机访问？
> 数组（Array）：一种线性表数据结构。用一组连续的内存空间，来存储一组具有相同类型的数据。


1. 线性表 数据排像一条线一样的结构。每个线性表上的数据最多只有前和后两个方向。其实除了数组，链表、队列、栈等也是线性表结构。
![](https://meto.chinakook.com/%C2%B71.jpg)
  非线性表 比如二叉树、堆、图等。之所以叫非线性，是因为在非线性表中，数据之间并不是简单的前后关系。
![](https://meto.chinakook.com/2.jpg)

2. 连续的内存空间和相同类型的数据   
* 特性：随机访问
* 弊端：让数组的很多操作变得非常低效。比如删除、插入数据，为了保证连续性，需要做大量的数据搬迁工作。

* 举例：我们拿一个长度为10的int类型的数组 int[] a = new int[10]，在下图中，计算机给数组a[10]分配了一块连续的空间1000~1039，其中，内存块的首地址为base_address=1000；
![](https://meto.chinakook.com/3.jpg)
当随机访问数组中的某个元素时，会先通过下面的功能公式计算出该元素存储的内存地址：
```
a[i]_address = base_address + i * data_type_size
```


### ArrayList相对于数组 最大的优势就是可以将很多数据操作的细节封装起来。第二个优势是支持动态扩容（ArrayList在存储空间不够大的时候会将空间自动扩充为原来的1.5倍大小）。


## 为什么大多数编程语言中，数组要从0开始编号，而不是从1开始呢？

> 从数组存储的内存模型上来看，“下标”最确切的定义应该是“偏移”。如果用 a 来表示数组的首地址，a[0] 就是偏移为 0 的位置，也
就是首地址，a[k] 就表示偏移为 k 个 type_size 的位置，所以计算 a[k] 的内存地址公式为：

```
a[k]_address = base_address + k * data_type_size
```

> 但是如果数组从 `1` 开始计数，计算数组元素 `a[k]` 的内存地址就变为：

```
a[k]_address = base_address +（ k-1）* data_type_size
```

> 这样每次随机访问数组元素都多了一次减法运算，对 CPU 来说，就多了一次减法指令。